#디자이너를 위한 웹 성능 최적화 기법

<p>팀은 최고의 사용자 경험이라는 공통의 목표를 가질 수 있고 사실 당연히 그래야 한다. 해리 로버츠(Harry Roberts)는 “세상에는 아름답기만 한 사이트를 원하는 디자이너나 빠르기만 한 사이트를 원하는 개발자，그저 일정만 단축시키고 싶은 고객은 없다. 오직 아름답고 속도가 빠른 사이트를 짧은 시간 내에 만들고 싶어 하는 팀이 있을 뿐이다"라고 말한 바 있다. 그러므로 아름다음과 성능 사이에서 결정을 내리기 위해서는 무엇 대 무엇의 사고방식보다는 어떤 것이 사용자에게 좋을지 고민하는 것이 유리하다.

때로는 실제 사용자 테스트를 한 후에도 사용자가 틀렸다며 실험의 결과를 무시하는 우를 범하고 있는 자신을 발견할지도 모른다. 혹시 성능 개선이 보안을 취약하게 만들었다고 생각하는가? 개인정보를 이용한 스팸을 자주 보냈기 때문에 수익을 얻었을지는 몰라도 사용자 경험은 나빠졌다고 생각하는가? 그러나 실험의 결과가 비즈니스 지표보다 더 좋다면 실험 속 변경 사항을 시용자가 선호하다고 믿어도 괜찮다. 염려하지 말자.</p>

<p>-아카마이는 사이트 멈춤, 에러, 너무 긴 로딩 시간이나 복잡한 결제 과정을 경험한 온라인 구매자의 75%가 그 사이트에서 구매를 하지않는다고 보고했다.
    -고매즈에서 온라인 구매자의 행동을 연구한 결과, 사이트에서 나쁜 경험을 한 사용자의 88%는 사이트를 재방문할 가능성이 낮다고 발표했다.
    -구글의 광고 서비스를 개발하고 제공하는 더블클릭이 클라이언트의 재전송 단계를 하나 줄이자 모바일 기기 사용자의 광고 진입률이 12% 증가했다.</p>

<p>
    디자이너나 개발자는 이런 주제들을 가지고 이야기해보자.
    -모바일 기기의 성능은 무엇에 의해 좌우되는가
    -설계 단계에서 사람들은 성능에 어떤 영향을 미치는가
    -체감 성능을 향상시킬 수 있는 방법은 무엇인가
</p>

<p>
    모든 사람은 성능에 대한 책임이 있다. 사이트의 사용자 경험에 영향을 미치는 사람은 누구나 사이트의 사용자 경험 구현에도 관련되어 있기 때문이다. 성능은 기술보다 문화와 더 밀접한 관련이 있다. 여러분의 조직 내에 많은 성능 챔피언이 생길수록 더 좋은 사용자 경험을 만들 수 있다.
</p>

<p>
    가장 최근에 한 디자인을 떠올려보자. 글꼴이나 이미지를 얼마나 많이 사용했는가? 이미지 파일의 크기는 어땠고, 파일 형식은 무엇이었는가? 디자인이 마크업과 CSS 구조를 잡는 데 어떤 영향을 주었는가?
    -색상과 그레디언트 : 어떤 이미지 종류를 쓸지, 투명도를 적용할 것인지, 얼마나 많은 스프라이트를 만들지, CSS3를 얼마나 사용할지에 영향을 준다.
    -레이아웃 : HTML 계층구조, Class와 ID이름, 디자인 패턴의 재구성 및 CSS 구성에 영향을 준다.
    -타이포그래피 : 파일 크기와 포함할 글꼴 파일의 수에 영향을 준다.
    -디자인 패턴 : 사이트 전반에 걸쳐 무엇을 어떻게 재사용하고 캐싱할지, 언제 어떻게 자원을 로딩할지, 나중에 작업할 디자이너나 개발자들이 얼마나 쉽게 수정할 수 있는지 영향을 준다.
</p>

<p>
    투명도와 오버레이 처리 여부에 따라 이미지의 파일 종류와 파일 크기가 바뀔 수 있다. 페이지 로딩 시간을 중요하게 고려하는 디자이너는 디자인 단계에서 스스로에게 다음과 같은 질문을 할 수 있어야 한다. 이미지를 JPEG나 불투명한 배경의 PNG-8파일로 내보내기하면 어떨까?</p>


### 이미지 포맷 고르기
<p>
    이미지 포맷을 결정할 때 다음의 질문을 스스로에게 던져보자.
    -눈에 띄는 품질 저하 없이 이미지를 압축할 수 있는가?
    -얼마나 많은 색상이 필요한가?
    -이미지를 더 단순하게 할 방법은 없는가?
    -이미지가 투명해야 하는가?
    -애니메이션이 필요한가?
    -이미지가 화면에 표시될 때 최대 높이와 너비는 어떻게 되는가?
    -사이트에서 어떤 용도로 사용할 것인가?
    웹에서 사용하는 가장 일반적인 이미지 파일 포맷은 JPEG, GIF, PNG다.
    JPEG : 사진, 많은 색이 사용된 이미지. -> 해상도 줄이기, 프로그레시브 JPEG로 내보내기, 이미지 노이즈 줄이기
    GIF : 애니메이션->디더링 줄이기, 색상 수 줄이기, 수평 패턴 사용, 수직 노이즈 줄이기
    PNG-8 : 적은 색이 사용된 이미지 -> 디더링 줄이기, 색상 수 줄이기, 수평 및 수직 패턴 사용
    PNG-24 : 일부 투명한 이미지 -> 노이즈 줄이기, 색상 수 줄이기
</p>


### JPEG
<p>
JPEG 파일은 아주 많은 색상이 사용된 이미지/사진에 이상적인 포맷이다. JPEG 파일은 높은 화질의 이미지를 사람의 눈으로 보기에는 차이가 없을 정도까지만 이미지를 손실시킨 후 압축하도록 설계되었다. 다만 JPEG가 손실 압축 방식이므로 낮은 품질의 이미지를 저장하는 데 JPEG 파일을 사용하면 사용자는 이미지가 인위적으로 변형되었다거나 색이 뭉개지고 선명하지 못하다는 느낌을 받을 수 있다. 손실 압축 방식의 포맷은 파일을 저장할 때 이미지의 정보를 일부 버리는데 JPEG는 사람이 눈으로 보고 인식하는 방식을 이용해 사람이 눈치채지 못할 정도로 정보를 손실시킨다. 이미지의 부드러운 그레이디언트 부분과 명암 대비가 낮은 부분, 즉 사용자가 눈치채기 어려운 부분에서 정보를 버린다. 그렇기 때문에 인접 픽셀 간 명암 대비가 크다면 PNG와 같은 포맷이 더 적합할 수 있다. 그러나 JPEG는 정보가 많은 이미지라도 다른 포맷보다 상대적으로 크기를 작게 만들 수 있어 웹의 이미지 대부분은 JPEG를 사용한다.
</p>
    
<p>
이미지 색상이 뚜렷할 수록 JPEG의 알고리즘이 압축하거나 색을 섞을 곳을 결정하기 어렵기 때문에 파일의 크기는 커진다. 반복 패턴이 많이 사용된 이미지라면 사용할 색상 수를 고려하여 JPEG를 사용할지 여부를 잘 판단해야 한다.
</p>

### 프로그레시브 JPEG
<p>
기본 JPEG 파일은 브라우저가 위에서 아래로 화면에 나타나게 되느넫, 프로그레시브 JPEG는 낮은 품질로 화면에 한꺼번에 나타난 후 이후 점차적으로 더 높은 품질버전으로 대체된다.
    다만, 프로그레시브 렌더링을 지원하지 않는 일부 브라우저는 이미지파일을 다 다운받은 후 보여주기 때문에, 다운받은 대로 표현하는 기본 JPEG보다 화면에 더 느리게 나타난다.
    또, 고려해야할 사항은 CPU인데, 이미지를 표시하기 위해 여러 번 스캔하는 프로그레시브 JPEG에서 각각의 스캔은 JPEG 파일 하나를 랜더링하는 것과 같은 수준의 CPU 파워를 소모한다. 모바일 기기에서 이 부분은 문제가 될 수 있다.
    사파리 모바일 브라우저는 프로그레시브 JPEG를 제공하지 않지만, 안드로이드의 크롬 브라우저나 다른 모바일 브라우저는 점진적으로 렌더링하기 때문에, 사용자 경험을 개선하는 훌륭한 방법이지만 브라우저 제조사들의 지속적인 노력이 필요하다.
</p>
    